{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "form-controlled-inputs",
  "type": "registry:ui",
  "title": "Form Fields",
  "dependencies": [
    "lucide-react",
    "react-hook-form"
  ],
  "registryDependencies": [
    "button",
    "input",
    "select",
    "label",
    "radio-group",
    "checkbox",
    "popover",
    "switch",
    "textarea",
    "form"
  ],
  "files": [
    {
      "path": "src/components/extensions/form/controller-field-wrapper.tsx",
      "content": "import {\n\tFormControl,\n\tFormDescription,\n\tFormField,\n\tFormFieldContext,\n\tFormItem,\n\tFormLabel,\n\tFormMessage,\n} from \"@/components/ui/form\";\nimport { cn } from \"@/lib/utils\";\nimport React, { useContext, useId } from \"react\";\nimport {\n\ttype ControllerRenderProps,\n\ttype FieldValues,\n\tuseFormContext,\n} from \"react-hook-form\";\n\nexport interface FieldWrapperProps {\n\tname: string;\n\tclassName?: string;\n\tlabel?: string;\n\tdescription?: string;\n\tchildren:\n\t\t| React.ReactElement<{ id?: string; isError?: boolean }>\n\t\t| ((\n\t\t\t\tfieldProps: ControllerRenderProps<FieldValues, string> & {\n\t\t\t\t\tid: string;\n\t\t\t\t\tisError?: boolean;\n\t\t\t\t},\n\t\t  ) => React.ReactNode);\n\tallowAny?: boolean;\n\tinline?: boolean;\n}\n\nexport function ControlledFieldWrapper({\n\tname,\n\tlabel,\n\tclassName,\n\tdescription,\n\tchildren,\n\tallowAny,\n\tinline = false,\n}: FieldWrapperProps) {\n\tconst id = useId();\n\t// Get the form context from shadcn's Form component\n\tconst fieldContext = useContext(FormFieldContext); // you need to export FormFieldContext from your form component file\n\n\tif (!fieldContext) {\n\t\tthrow new Error(\"FieldWrapper must be used within a Form component\");\n\t}\n\n\tconst { control, getFieldState } = useFormContext();\n\n\t// Check if the field name is valid in the current form\n\ttry {\n\t\t// This will throw an error if the field doesn't exist\n\t\tif (!allowAny) getFieldState(name);\n\t} catch (error) {\n\t\tconsole.error(`Field \"${name}\" does not exist in the form context`);\n\t}\n\n\treturn (\n\t\t<FormField\n\t\t\tname={name}\n\t\t\tcontrol={control}\n\t\t\trender={({ field, fieldState }) => {\n\t\t\t\tconst { invalid } = fieldState;\n\n\t\t\t\treturn (\n\t\t\t\t\t<FormItem className=\"space-y-1\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\"gap-1\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"flex flex-col\": !inline,\n\t\t\t\t\t\t\t\t\t\"flex items-center space-x-1\": inline,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tclassName,\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{label && <FormLabel htmlFor={id}>{label}</FormLabel>}\n\t\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t\t{typeof children === \"function\"\n\t\t\t\t\t\t\t\t\t? children({\n\t\t\t\t\t\t\t\t\t\t\t...field,\n\t\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\t\tisError: invalid,\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t: React.isValidElement(children)\n\t\t\t\t\t\t\t\t\t\t? React.cloneElement(children, {\n\t\t\t\t\t\t\t\t\t\t\t\t...field,\n\t\t\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t: children}\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{description && <FormDescription>{description}</FormDescription>}\n\t\t\t\t\t\t<FormMessage />\n\t\t\t\t\t</FormItem>\n\t\t\t\t);\n\t\t\t}}\n\t\t/>\n\t);\n}\n",
      "type": "registry:ui"
    },
    {
      "path": "src/components/extensions/form/controlled-inputs.tsx",
      "content": "import {\n\tControlledFieldWrapper,\n\ttype FieldWrapperProps,\n} from \"@/components/extensions/form/controller-field-wrapper\";\nimport { Button } from \"@/components/ui/button\";\nimport { Calendar } from \"@/components/ui/calendar\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { FormControl, FormItem, FormLabel } from \"@/components/ui/form\";\nimport { Input, type InputProps } from \"@/components/ui/input\";\nimport {\n\tPopover,\n\tPopoverContent,\n\tPopoverTrigger,\n} from \"@/components/ui/popover\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport {\n\tSelect,\n\tSelectContent,\n\tSelectGroup,\n\tSelectItem,\n\tSelectTrigger,\n\tSelectValue,\n} from \"@/components/ui/select\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { cn } from \"@/lib/utils\";\nimport { format } from \"date-fns\";\nimport { CalendarIcon } from \"lucide-react\";\nimport type { ReactNode } from \"react\";\nimport React from \"react\";\n\ninterface ControlledFieldWrapperProps<T>\n\textends Omit<FieldWrapperProps, \"children\"> {\n\tinputProps?: T;\n}\n\ntype InputControllerProps = ControlledFieldWrapperProps<InputProps>;\n\nexport const InputControlled: React.FC<InputControllerProps> = ({\n\tinputProps,\n\t...props\n}) => {\n\treturn (\n\t\t<ControlledFieldWrapper {...props}>\n\t\t\t{(fieldProps) => (\n\t\t\t\t<Input\n\t\t\t\t\t{...inputProps}\n\t\t\t\t\t{...fieldProps}\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\tinputProps?.className,\n\t\t\t\t\t\tfieldProps.isError && \"border-destructive\",\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</ControlledFieldWrapper>\n\t);\n};\n\ntype SelectControllerProps = ControlledFieldWrapperProps<{\n\tplaceholder?: string;\n\tclassName?: string;\n\toptions: Array<\n\t\t| {\n\t\t\t\tlabel: string | React.ReactNode;\n\t\t\t\tvalue: string;\n\t\t\t\tdisabled?: boolean;\n\t\t  }\n\t\t| React.ReactNode\n\t>;\n}>;\n\nexport const SelectControlled: React.FC<SelectControllerProps> = ({\n\tinputProps,\n\t...props\n}) => {\n\treturn (\n\t\t<ControlledFieldWrapper {...props}>\n\t\t\t{(fieldProps) => (\n\t\t\t\t<Select value={fieldProps.value} onValueChange={fieldProps.onChange}>\n\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t<SelectTrigger\n\t\t\t\t\t\t\tid={fieldProps.id}\n\t\t\t\t\t\t\tclassName={cn(inputProps?.className, {\n\t\t\t\t\t\t\t\t\"border-destructive\": fieldProps.isError,\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<SelectValue placeholder={inputProps?.placeholder} />\n\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t</FormControl>\n\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t<SelectGroup>\n\t\t\t\t\t\t\t{inputProps?.options?.map((option, index) => {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\ttypeof option === \"string\" ||\n\t\t\t\t\t\t\t\t\tReact.isValidElement(option)\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\treturn React.isValidElement(option)\n\t\t\t\t\t\t\t\t\t\t? React.cloneElement(option, { key: `option-${index}` })\n\t\t\t\t\t\t\t\t\t\t: option;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\ttypeof option === \"object\" &&\n\t\t\t\t\t\t\t\t\toption !== null &&\n\t\t\t\t\t\t\t\t\t\"label\" in option &&\n\t\t\t\t\t\t\t\t\t\"value\" in option\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<SelectItem\n\t\t\t\t\t\t\t\t\t\t\tkey={`option-${index}`}\n\t\t\t\t\t\t\t\t\t\t\tvalue={option.value}\n\t\t\t\t\t\t\t\t\t\t\tdisabled={option.disabled}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{option.label}\n\t\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t\t\t`Invalid option type: ${typeof option}. Expected string, ReactNode, or { label: string, value: string, disabled?: boolean }`,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</SelectGroup>\n\t\t\t\t\t</SelectContent>\n\t\t\t\t</Select>\n\t\t\t)}\n\t\t</ControlledFieldWrapper>\n\t);\n};\n\ntype CheckboxControlledProps = ControlledFieldWrapperProps<{\n\tclassName?: string;\n\tbordered?: boolean;\n}>;\n\nexport const CheckboxControlled = ({\n\tinputProps,\n\t...props\n}: CheckboxControlledProps) => {\n\treturn (\n\t\t<div\n\t\t\tclassName={cn(\" gap-2  \", {\n\t\t\t\t\"border rounded-md p-4\": inputProps?.bordered,\n\t\t\t})}\n\t\t>\n\t\t\t<ControlledFieldWrapper\n\t\t\t\tclassName=\"flex-row-reverse w-fit\"\n\t\t\t\tinline\n\t\t\t\t{...props}\n\t\t\t>\n\t\t\t\t{(fieldProps) => (\n\t\t\t\t\t<Checkbox\n\t\t\t\t\t\tid={fieldProps.id}\n\t\t\t\t\t\tchecked={fieldProps.value}\n\t\t\t\t\t\tonCheckedChange={fieldProps.onChange}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</ControlledFieldWrapper>\n\t\t</div>\n\t);\n};\n\ntype CheckboxGroupControlledProps = ControlledFieldWrapperProps<{\n\tclassName?: string;\n\toptions: Array<{\n\t\tlabel: string | ReactNode;\n\t\tvalue: string;\n\t\tdisabled?: boolean;\n\t}>;\n}>;\n\nexport const CheckboxGroupControlled: React.FC<\n\tCheckboxGroupControlledProps\n> = ({ inputProps, ...props }) => {\n\treturn (\n\t\t<ControlledFieldWrapper {...props} inline={false}>\n\t\t\t{(fieldProps) => (\n\t\t\t\t<div\n\t\t\t\t\tclassName={cn(\"flex  flex-col gap-2 mt-2\", {\n\t\t\t\t\t\t\"flex-row flex-wrap\": props.inline,\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t{inputProps?.options?.map((option, index) => (\n\t\t\t\t\t\t<FormItem\n\t\t\t\t\t\t\tclassName=\"space-y-1\"\n\t\t\t\t\t\t\tkey={`checkbox-group-${index}-${fieldProps.id}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\"gap-1 flex items-center space-x-1\",\n\n\t\t\t\t\t\t\t\t\tprops.className,\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\t\tkey={`checkbox-${index}`}\n\t\t\t\t\t\t\t\t\t\tid={`${fieldProps.id}-${index}`}\n\t\t\t\t\t\t\t\t\t\tchecked={fieldProps.value.includes(option.value)}\n\t\t\t\t\t\t\t\t\t\tonCheckedChange={(checked) => {\n\t\t\t\t\t\t\t\t\t\t\treturn checked\n\t\t\t\t\t\t\t\t\t\t\t\t? fieldProps.onChange([\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t...fieldProps.value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\toption.value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t\t\t\t\t\t: fieldProps.onChange(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfieldProps.value?.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(value: any) => value !== option.value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tdisabled={option.disabled}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t\t<FormLabel htmlFor={`${fieldProps.id}-${index}`}>\n\t\t\t\t\t\t\t\t\t{option.label}\n\t\t\t\t\t\t\t\t</FormLabel>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</FormItem>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</ControlledFieldWrapper>\n\t);\n};\n\ntype DatePickerControlledProps = ControlledFieldWrapperProps<{\n\tclassName?: string;\n\tplaceholder?: string;\n}>;\n\nexport const DatePickerControlled: React.FC<DatePickerControlledProps> = ({\n\tinputProps,\n\t...props\n}) => {\n\treturn (\n\t\t<ControlledFieldWrapper {...props}>\n\t\t\t{(fieldProps) => (\n\t\t\t\t<Popover>\n\t\t\t\t\t<PopoverTrigger asChild>\n\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant={\"outline\"}\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\" pl-3 text-left font-normal\",\n\t\t\t\t\t\t\t\t\t!fieldProps.value && \"text-muted-foreground\",\n\t\t\t\t\t\t\t\t\tinputProps?.className,\n\t\t\t\t\t\t\t\t\tfieldProps.isError && \"border-destructive\",\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{fieldProps.value ? (\n\t\t\t\t\t\t\t\t\tformat(fieldProps.value, \"dd/MM/yyyy\")\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<span>Pick a date</span>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<CalendarIcon className=\"opacity-50 ml-auto w-4 h-4\" />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t</PopoverTrigger>\n\t\t\t\t\t<PopoverContent className=\"p-0 w-auto\" align=\"start\">\n\t\t\t\t\t\t<Calendar\n\t\t\t\t\t\t\tmode=\"single\"\n\t\t\t\t\t\t\tselected={fieldProps.value}\n\t\t\t\t\t\t\tonSelect={fieldProps.onChange}\n\t\t\t\t\t\t\tdisabled={(date) =>\n\t\t\t\t\t\t\t\tdate > new Date() || date < new Date(\"1900-01-01\")\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tinitialFocus\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PopoverContent>\n\t\t\t\t</Popover>\n\t\t\t)}\n\t\t</ControlledFieldWrapper>\n\t);\n};\n\ntype RadioGroupControlledProps = ControlledFieldWrapperProps<{\n\tclassName?: string;\n\toptions: Array<{\n\t\tlabel: string | ReactNode;\n\t\tvalue: string;\n\t\tdisabled?: boolean;\n\t}>;\n}>;\n\nexport const RadioGroupControlled: React.FC<RadioGroupControlledProps> = ({\n\tinputProps,\n\t...props\n}) => {\n\treturn (\n\t\t<ControlledFieldWrapper {...props} inline={false}>\n\t\t\t{(fieldProps) => (\n\t\t\t\t<RadioGroup\n\t\t\t\t\tonValueChange={fieldProps.onChange}\n\t\t\t\t\tdefaultValue={fieldProps.value}\n\t\t\t\t\tclassName={cn(\"flex flex-col space-y-1 mt-2\", inputProps?.className)}\n\t\t\t\t>\n\t\t\t\t\t{inputProps?.options?.map((option, index) => (\n\t\t\t\t\t\t<FormItem\n\t\t\t\t\t\t\tkey={`radio-group-${index}-${fieldProps.id}`}\n\t\t\t\t\t\t\tclassName=\"flex items-center space-x-3 space-y-0\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t\t<RadioGroupItem\n\t\t\t\t\t\t\t\t\tdisabled={option.disabled}\n\t\t\t\t\t\t\t\t\tvalue={option.value}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t<FormLabel className=\"font-normal\">{option.label}</FormLabel>\n\t\t\t\t\t\t</FormItem>\n\t\t\t\t\t))}\n\t\t\t\t</RadioGroup>\n\t\t\t)}\n\t\t</ControlledFieldWrapper>\n\t);\n};\n\ntype RadioSwitchControlledProps = ControlledFieldWrapperProps<{\n\tclassName?: string;\n\tbordered?: boolean;\n}>;\n\nexport const RadioSwitchControlled = ({\n\tinputProps,\n\t...props\n}: RadioSwitchControlledProps) => {\n\treturn (\n\t\t<div\n\t\t\tclassName={cn(\" gap-2  \", {\n\t\t\t\t\"border rounded-md p-4\": inputProps?.bordered,\n\t\t\t})}\n\t\t>\n\t\t\t<ControlledFieldWrapper\n\t\t\t\tclassName=\"flex-row-reverse gap-2 w-fit\"\n\t\t\t\tinline\n\t\t\t\t{...props}\n\t\t\t>\n\t\t\t\t{(fieldProps) => (\n\t\t\t\t\t<Switch\n\t\t\t\t\t\tid={fieldProps.id}\n\t\t\t\t\t\tchecked={fieldProps.value}\n\t\t\t\t\t\tonCheckedChange={fieldProps.onChange}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</ControlledFieldWrapper>\n\t\t</div>\n\t);\n};\n\ntype TextAreaControllerProps = ControlledFieldWrapperProps<\n\tReact.ComponentProps<\"textarea\">\n>;\n\nexport const TextAreaControlled: React.FC<TextAreaControllerProps> = ({\n\tinputProps,\n\t...props\n}) => {\n\treturn (\n\t\t<ControlledFieldWrapper {...props}>\n\t\t\t{(fieldProps) => (\n\t\t\t\t<Textarea\n\t\t\t\t\t{...inputProps}\n\t\t\t\t\t{...fieldProps}\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\tinputProps?.className,\n\t\t\t\t\t\tfieldProps.isError && \"border-destructive\",\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</ControlledFieldWrapper>\n\t);\n};\n",
      "type": "registry:ui"
    }
  ]
}